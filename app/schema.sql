

CREATE TABLE users (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    username TEXT UNIQUE NOT NULL,
    password TEXT NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE user_settings (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    user_id INTEGER NOT NULL,
    age INTEGER NOT NULL,
    height REAL NOT NULL,
    gender char (1) NOT NULL,
    unit_of_weight TEXT NOT NULL,
    unit_of_length TEXT NOT NULL,
    goal_weight REAL NOT NULL,
    starting_weight REAL NOT NULL,
    FOREIGN KEY (user_id) REFERENCES users (id)
);

CREATE TABLE entries (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    user_id INTEGER NOT NULL,
    entry_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
    weight REAL NOT NULL,
    FOREIGN KEY (user_id) REFERENCES users (id)
    CONSTRAINT unique_entry UNIQUE (entry_date)
);


-- Test
INSERT INTO
    users (username, password)
VALUES
    (
        '123',
        'scrypt:32768:8:1$bSj6xbFvWxRV4oZY$1a97eba3047e4c85dbb04e1cc5a080726f8d4653de3dadb5653791848150de6d42d76fdfa47a1eedeccb64952f6c333698bc98c49451b469cc24721405ebec39'
    );

INSERT INTO
    entries (user_id, entry_date, weight)
VALUES
    (1, '2022-09-11', 72.3),
    (1, '2022-09-18', 72.1),
    (1, '2022-09-25', 71.3),
    (1, '2022-10-02', 71.9),
    (1, '2022-10-09', 69.5),
    (1, '2022-10-16', 70.9),
    (1, '2022-10-23', 69.9),
    (1, '2022-10-30', 70.4),
    (1, '2022-11-06', 72.3),
    (1, '2022-11-13', 72.9),
    (1, '2022-11-20', 74.1),
    (1, '2022-11-27', 74.5),
    (1, '2022-12-04', 73.8),
    (1, '2022-12-11', 74.1),
    (1, '2022-12-18', 74.4),
    (1, '2022-12-25', 75.6),
    (1, '2023-01-01', 76.5),
    (1, '2023-01-08', 77.6),
    (1, '2023-01-15', 76.6),
    (1, '2023-01-22', 77.6),
    (1, '2023-01-23', 76.5),
    (1, '2023-01-24', 77.2),
    (1, '2023-01-25', 77.4),
    (1, '2023-01-26', 77.4),
    (1, '2023-01-27', 76.6),
    (1, '2023-01-29', 75.6),
    (1, '2023-01-30', 75.2),
    (1, '2023-01-31', 76.0),
    (1, '2023-02-01', 75.7),
    (1, '2023-02-02', 75.8),
    (1, '2023-02-03', 75.5),
    (1, '2023-02-06', 74.4),
    (1, '2023-02-07', 74.5),
    (1, '2023-02-08', 75.1),
    (1, '2023-02-09', 74.4),
    (1, '2023-02-10', 75.8),
    (1, '2023-02-12', 76.5),
    (1, '2023-02-13', 75.4),
    (1, '2023-02-14', 76.4),
    (1, '2023-02-15', 76.7),
    (1, '2023-02-16', 76.9),
    (1, '2023-02-17', 76.8),
    (1, '2023-02-19', 77.5),
    (1, '2023-02-20', 76.6),
    (1, '2023-02-21', 78.2),
    (1, '2023-02-24', 78.9),
    (1, '2023-02-26', 76.7),
    (1, '2023-02-27', 78.6),
    (1, '2023-02-28', 78.9),
    (1, '2023-03-01', 78.2),
    (1, '2023-03-02', 78.0),
    (1, '2023-03-03', 78.4),
    (1, '2023-03-05', 78.2),
    (1, '2023-03-06', 78.1),
    (1, '2023-03-07', 78.2),
    (1, '2023-03-08', 78.5),
    (1, '2023-03-09', 77.6),
    (1, '2023-03-10', 77.9),
    (1, '2023-03-12', 78.1),
    (1, '2023-03-13', 77.8),
    (1, '2023-03-14', 78.1),
    (1, '2023-03-15', 78.0),
    (1, '2023-03-16', 77.7),
    (1, '2023-03-17', 78.1),
    (1, '2023-03-19', 77.5),
    (1, '2023-03-20', 77.5),
    (1, '2023-03-21', 77.3),
    (1, '2023-03-22', 77.7),
    (1, '2023-03-23', 78.4),
    (1, '2023-03-24', 77.8),
    (1, '2023-03-26', 77.7),
    (1, '2023-03-27', 77.6),
    (1, '2023-03-28', 77.9),
    (1, '2023-04-05', 77.8),
    (1, '2023-04-07', 77.9),
    (1, '2023-04-08', 77.9),
    (1, '2023-04-09', 77.7),
    (1, '2023-04-10', 78.4),
    (1, '2023-04-11', 78.2),
    (1, '2023-04-12', 78.4),
    (1, '2023-04-13', 78.0),
    (1, '2023-04-14', 78.4),
    (1, '2023-04-15', 77.7),
    (1, '2023-04-16', 78.2),
    (1, '2023-04-17', 78.3),
    (1, '2023-04-18', 79.4),
    (1, '2023-04-20', 78.0),
    (1, '2023-04-21', 78.9),
    (1, '2023-04-23', 78.5),
    (1, '2023-04-24', 78.9),
    (1, '2023-04-25', 78.5),
    (1, '2023-04-26', 78.8),
    (1, '2023-04-27', 79.4),
    (1, '2023-04-28', 78.7),
    (1, '2023-04-30', 78.5),
    (1, '2023-05-01', 78.8),
    (1, '2023-05-02', 78.2),
    (1, '2023-05-03', 78.9),
    (1, '2023-05-04', 79.5),
    (1, '2023-05-05', 78.6),
    (1, '2023-05-07', 79.0),
    (1, '2023-05-14', 78.6),
    (1, '2023-05-21', 79.5),
    (1, '2023-05-28', 80.5),
    (1, '2023-05-29', 79.8),
    (1, '2023-05-30', 78.7),
    (1, '2023-05-31', 79.3),
    (1, '2023-06-01', 79.1),
    (1, '2023-06-02', 79.8),
    (1, '2023-06-04', 79.9),
    (1, '2023-06-05', 78.9),
    (1, '2023-06-06', 79.1),
    (1, '2023-06-07', 79.2),
    (1, '2023-06-08', 78.6),
    (1, '2023-06-09', 78.8),
    (1, '2023-06-12', 78.8),
    (1, '2023-06-13', 79.0),
    (1, '2023-06-14', 78.7),
    (1, '2023-06-16', 78.0),
    (1, '2023-06-18', 79.2),
    (1, '2023-06-19', 79.2),
    (1, '2023-06-20', 78.6),
    (1, '2023-06-21', 78.8),
    (1, '2023-06-22', 78.4),
    (1, '2023-06-25', 79.6),
    (1, '2023-06-26', 78.5),
    (1, '2023-06-27', 80.5),
    (1, '2023-06-28', 79.5),
    (1, '2023-06-29', 78.2),
    (1, '2023-06-30', 78.8),
    (1, '2023-07-02', 78.8),
    (1, '2023-07-03', 78.5),
    (1, '2023-07-04', 79.2),
    (1, '2023-07-05', 78.1),
    (1, '2023-07-06', 79.7),
    (1, '2023-07-07', 79.0),
    (1, '2023-07-09', 79.1),
    (1, '2023-07-10', 78.5),
    (1, '2023-07-11', 78.0),
    (1, '2023-07-12', 78.4),
    (1, '2023-07-13', 78.1),
    (1, '2023-07-14', 78.2),
    (1, '2023-07-16', 79.8),
    (1, '2023-07-17', 80.7),
    (1, '2023-07-18', 79.6),
    (1, '2023-07-19', 79.0),
    (1, '2023-07-20', 78.9),
    (1, '2023-07-21', 78.8),
    (1, '2023-07-23', 79.9),
    (1, '2023-07-24', 79.1),
    (1, '2023-07-25', 79.9),
    (1, '2023-07-26', 79.0),
    (1, '2023-07-27', 78.3),
    (1, '2023-07-30', 77.6),
    (1, '2023-07-31', 78.2),
    (1, '2023-08-01', 79.1),
    (1, '2023-08-02', 78.6),
    (1, '2023-08-03', 79.5),
    (1, '2023-08-04', 79.8),
    (1, '2023-08-06', 78.2),
    (1, '2023-08-07', 78.1),
    (1, '2023-08-08', 78.6),
    (1, '2023-08-09', 78.3),
    (1, '2023-08-10', 79.5),
    (1, '2023-08-11', 79.2),
    (1, '2023-08-13', 79.5),
    (1, '2023-08-14', 79.4),
    (1, '2023-08-15', 79.8),
    (1, '2023-08-16', 79.7),
    (1, '2023-08-17', 78.9),
    (1, '2023-08-18', 78.5),
    (1, '2023-08-20', 78.2),
    (1, '2023-08-21', 79.1),
    (1, '2023-08-22', 79.1),
    (1, '2023-08-23', 79.3),
    (1, '2023-08-24', 78.7),
    (1, '2023-08-25', 78.4),
    (1, '2023-08-27', 78.5),
    (1, '2023-08-28', 78.2),
    (1, '2023-08-29', 78.3),
    (1, '2023-08-30', 80.3),
    (1, '2023-08-31', 80.0),
    (1, '2023-09-01', 79.3),
    (1, '2023-09-03', 79.8),
    (1, '2023-09-04', 78.8),
    (1, '2023-09-05', 79.7),
    (1, '2023-09-06', 79.5),
    (1, '2023-09-07', 78.9),
    (1, '2023-09-08', 78.8),
    (1, '2023-09-10', 78.5),
    (1, '2023-09-11', 78.3),
    (1, '2023-09-12', 78.4),
    (1, '2023-09-13', 78.1),
    (1, '2023-09-14', 78.1),
    (1, '2023-09-15', 78.1),
    (1, '2023-09-18', 79.4),
    (1, '2023-09-19', 77.8),
    (1, '2023-09-20', 79.3),
    (1, '2023-09-21', 79.3),
    (1, '2023-09-22', 79.7),
    (1, '2023-09-24', 78.7),
    (1, '2023-09-26', 78.4),
    (1, '2023-09-27', 78.9),
    (1, '2023-09-28', 78.6),
    (1, '2023-09-29', 78.8),
    (1, '2023-10-01', 79.2),
    (1, '2023-10-02', 79.6),
    (1, '2023-10-03', 79.2),
    (1, '2023-10-06', 79.9),
    (1, '2023-10-08', 80.4),
    (1, '2023-10-09', 80.3),
    (1, '2023-10-10', 79.7),
    (1, '2023-10-11', 80.5),
    (1, '2023-10-12', 80.3),
    (1, '2023-10-13', 79.9),
    (1, '2023-10-15', 79.6),
    (1, '2023-10-16', 79.3),
    (1, '2023-10-17', 79.7),
    (1, '2023-10-19', 79.7),
    (1, '2023-10-20', 79.4),
    (1, '2023-10-22', 80.2 );